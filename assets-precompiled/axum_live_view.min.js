(()=>{"use strict";var e,t={579:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveView=void 0;const i=o(n(34));function r(e){if(null===document.getElementById("live-view-container"))return;var t;t=-1===location.protocol.indexOf("https")?"ws":"wss";const n=new WebSocket(`${t}://${window.location.host}${window.location.pathname}`);var o={};n.addEventListener("open",(()=>{!function(e,t){setInterval((()=>{t.debug&&console.time(a),u(e,{t:"h"})}),3e4)}(n,e)})),n.addEventListener("message",(t=>{!function(e,t,n,o){const i=JSON.parse(t.data);if("i"===i.t)n.viewState=i.d,p(e,n,o),function(e,t){const n=Object.values(l).map((e=>`[${e}]`)).join(", ");document.querySelectorAll(n).forEach((n=>{s(e,n,t)}))}(e,o);else if("r"===i.t){if(!n.viewState)return;if(!i.d)return;b(n.viewState,i.d),p(e,n,o)}else if("j"===i.t)for(const e of i.d)h(e);else"h"===i.t&&o.debug&&console.timeEnd(a)}(n,t,o,e)})),n.addEventListener("close",(()=>{!function(e){setTimeout((()=>{r(e)}),1e3)}(e)}))}t.LiveView=class{constructor(){this.options={debug:!1},r(this.options)}enableDebug(){this.options.debug=!0}disableDebug(){this.options.debug=!1}};const a="ping";function u(e,t,n){e.send(JSON.stringify(t))}const l={click:"axm-click",input:"axm-input",change:"axm-change",submit:"axm-submit",focus:"axm-focus",blur:"axm-blur",keydown:"axm-keydown",keyup:"axm-keyup",mouseenter:"axm-mouseenter",mouseover:"axm-mouseover",mouseleave:"axm-mouseleave",mouseout:"axm-mouseout",mousemove:"axm-mousemove"},c={keydown:"axm-window-keydown",keyup:"axm-window-keyup",focus:"axm-window-focus",blur:"axm-window-blur",scroll:"axm-scroll"};function s(e,t,n){t.hasAttribute(l.click)&&d(e,0,t,t,"click",l.click,(e=>({t:"click",m:e}))),(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)&&(t.hasAttribute(l.input)&&d(e,0,t,t,"input",l.input,(e=>({t:"input",m:e,d:{v:m(t)}}))),t.hasAttribute(l.change)&&d(e,0,t,t,"change",l.change,(e=>({t:"input",m:e,d:{v:m(t)}}))),t.hasAttribute(l.focus)&&d(e,0,t,t,"focus",l.focus,(e=>({t:"input",m:e,d:{v:m(t)}}))),t.hasAttribute(l.blur)&&d(e,0,t,t,"blur",l.blur,(e=>({t:"input",m:e,d:{v:m(t)}})))),t instanceof HTMLFormElement&&(t.hasAttribute(l.change)&&d(e,0,t,t,"change",l.change,(e=>{const n=new FormData(t);return{t:"form",m:e,d:{q:new URLSearchParams(n).toString()}}})),t.hasAttribute(l.submit)&&d(e,0,t,t,"submit",l.submit,(e=>{const n=new FormData(t);return{t:"form",m:e,d:{q:new URLSearchParams(n).toString()}}}))),[["mouseenter",l.mouseenter],["mouseover",l.mouseover],["mouseleave",l.mouseleave],["mouseout",l.mouseout],["mousemove",l.mousemove]].forEach((([n,o])=>{n&&o&&t.hasAttribute(o)&&d(e,0,t,t,n,o,((e,t)=>{if(t instanceof MouseEvent)return{t:"mouse",m:e,d:{cx:t.clientX,cy:t.clientY,px:t.pageX,py:t.pageY,ox:t.offsetX,oy:t.offsetY,mx:t.movementX,my:t.movementY,sx:t.screenX,sy:t.screenY}}}))})),[["keydown",l.keydown],["keyup",l.keyup]].forEach((([n,o])=>{n&&o&&t.hasAttribute(o)&&d(e,0,t,t,n,o,((e,n)=>{var o;if(n instanceof KeyboardEvent){if(t.hasAttribute("axm-key")&&(null===(o=null==t?void 0:t.getAttribute("axm-key"))||void 0===o?void 0:o.toLowerCase())!==n.key.toLowerCase())return;return{t:"key",m:e,d:{k:n.key,kc:n.code,a:n.altKey,c:n.ctrlKey,s:n.shiftKey,me:n.metaKey}}}}))}))}function d(e,t,n,o,i,r,a){var l=function(e,t){var n=v(e,"axm-debounce");return n?function(e,t){var n;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...o)}),t)}}(t,n):(n=v(e,"axm-throttle"))?function(e,t){var n;return(...o)=>{n||(e(...o),n=setTimeout((()=>{n=null}),t))}}(t,n):t}(n,(t=>{t instanceof KeyboardEvent||t.preventDefault();const o=function(e,t){const n=e.getAttribute(t);if(n)try{return JSON.parse(n)}catch(e){return n}}(n,r);if(!o)return;const i=a(o,t);i&&u(e,i)}));document===o&&f.push({event:i,callback:l}),o.addEventListener(i,l)}var f=[];function m(e){if(e instanceof HTMLTextAreaElement)return e.value;if(e instanceof HTMLInputElement)return"radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")?e.checked:e.value;if(e instanceof HTMLSelectElement)return e.hasAttribute("multiple")?Array.from(e.selectedOptions).map((e=>e.value)):e.value;throw"Input has no input value"}function v(e,t){const n=e.getAttribute(t);if(n){const e=parseInt(n,10);if(e)return e}return null}function p(e,t,n){if(!t.viewState)return;const o=function e(t){var n="";return t.f.forEach(((o,i)=>{if(n=n.concat(o),void 0===t.d)return;const r=t.d[i];if(null!=r)if("string"==typeof r)n=n.concat(r);else if("b"in r){const t=r.f;Object.values(r.b).forEach((o=>{const i={f:t,d:o};n=n.concat(e(i))}))}else n=n.concat(e(r))})),n}(t.viewState),r=document.querySelector("#live-view-container");r&&function(e,t,n){for(var o=0;o<f.length;o++){let e=f[o];e&&(document.removeEventListener(e.event,e.callback),f.splice(o,1))}(0,i.default)(t,n,{onNodeAdded:t=>(t instanceof Element&&s(e,t),t),onBeforeElUpdated:(e,t)=>{var n;return e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")?t.checked=e.checked:t.value=e.value),e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement&&(t.value=e.value),e instanceof HTMLOptionElement&&t instanceof HTMLOptionElement&&(null===(n=t.closest("select"))||void 0===n?void 0:n.hasAttribute("multiple"))&&(t.selected=e.selected),e instanceof HTMLSelectElement&&t instanceof HTMLSelectElement&&!t.hasAttribute("multiple")&&(t.value=e.value),!0}});const r=Object.values(c).map((e=>`[${e}]`)).join(", ");document.querySelectorAll(r).forEach((t=>{!function(e,t,n){[["keydown",c.keydown],["keyup",c.keyup]].forEach((([n,o])=>{n&&o&&t.hasAttribute(o)&&d(e,0,t,document,n,o,((e,n)=>{var o;if(n instanceof KeyboardEvent){if(t.hasAttribute("axm-key")&&(null===(o=null==t?void 0:t.getAttribute("axm-key"))||void 0===o?void 0:o.toLowerCase())!==n.key.toLowerCase())return;return{t:"key",m:e,d:{k:n.key,kc:n.code,a:n.altKey,c:n.ctrlKey,s:n.shiftKey,me:n.metaKey}}}}))})),t.hasAttribute(c.focus)&&d(e,0,t,document,"focus",c.focus,(e=>({t:"window_focus",m:e}))),t.hasAttribute(c.blur)&&d(e,0,t,document,"blur",c.blur,(e=>({t:"window_blur",m:e}))),t.hasAttribute(c.scroll)&&d(e,0,t,document,"scroll",c.scroll,(e=>({t:"scroll",m:e,d:{sx:window.scrollX,sy:window.scrollY}})))}(e,t)}))}(e,r,o)}function b(e,t){function n(e,t){for(const[n,i]of Object.entries(t))if("string"==typeof i)e[n]=i;else if(null===i)delete e[n];else if("object"==typeof i){const t=e[n];if(void 0===t)continue;"d"in i?"string"==typeof t?e[n]=i:"d"in t?b(t,i):"b"in t?console.error("not implemented: b in current"):e[n]=i:"b"in i?"string"==typeof t?e[n]=i:"b"in t?o(t,i):e[n]={f:t.f,b:i.b}:"f"in i?"string"==typeof t?e[n]=i:"d"in t?b(t,i):"b"in t?console.error("not implemented: b in current, with f"):e[n]=i:console.error("unexpected diff value",i)}}function o(e,t){if(t.f&&(e.f=t.f),t.b)for(const[o,i]of Object.entries(t.b))if(null===i)delete e.b[o];else{const t=e.b[o];void 0===t||"string"==typeof t?e.b[o]=i:n(t,i)}}t.f&&(e.f=t.f),t.d&&null!==t.d&&n(e.d||{},t.d)}function h(e){const t=()=>{if("navigate_to"===e.kind.t){const t=e.kind.uri;t.startsWith("http")?window.location.href=t:window.location.pathname=t}else if("add_class"===e.kind.t){const{selector:t,klass:n}=e.kind;document.querySelectorAll(t).forEach((e=>{e.classList.add(n)}))}else if("remove_class"===e.kind.t){const{selector:t,klass:n}=e.kind;document.querySelectorAll(t).forEach((e=>{e.classList.remove(n)}))}else if("toggle_class"===e.kind.t){const{selector:t,klass:n}=e.kind;document.querySelectorAll(t).forEach((e=>{e.classList.toggle(n)}))}else if("clear_value"===e.kind.t){const{selector:t}=e.kind;document.querySelectorAll(t).forEach((e=>{(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&(e.value="")}))}else"set_title"===e.kind.t?document.title=e.kind.title:"history_push_state"===e.kind.t?window.history.pushState({},"",e.kind.uri):e.kind};e.delay_ms?setTimeout(t,e.delay_ms):t()}},34:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o,i="undefined"==typeof document?void 0:document,r=!!i&&"content"in i.createElement("template"),a=!!i&&i.createRange&&"createContextualFragment"in i.createRange();function u(e,t){var n,o,i=e.nodeName,r=t.nodeName;return i===r||(n=i.charCodeAt(0),o=r.charCodeAt(0),n<=90&&o>=97?i===r.toUpperCase():o<=90&&n>=97&&r===i.toUpperCase())}function l(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var c,s={OPTION:function(e,t){var n=e.parentNode;if(n){var o=n.nodeName.toUpperCase();"OPTGROUP"===o&&(o=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==o||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}l(e,t,"selected")},INPUT:function(e,t){l(e,t,"checked"),l(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var o=e.firstChild;if(o){var i=o.nodeValue;if(i==n||!n&&i==e.placeholder)return;o.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,o,i=-1,r=0,a=e.firstChild;a;)if("OPTGROUP"===(o=a.nodeName&&a.nodeName.toUpperCase()))a=(n=a).firstChild;else{if("OPTION"===o){if(a.hasAttribute("selected")){i=r;break}r++}!(a=a.nextSibling)&&n&&(a=n.nextSibling,n=null)}e.selectedIndex=i}}},d=1,f=3,m=8;function v(){}function p(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}const b=(c=function(e,t){var n,o,i,r,a=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var u=a.length-1;u>=0;u--)o=(n=a[u]).name,i=n.namespaceURI,r=n.value,i?(o=n.localName||o,e.getAttributeNS(i,o)!==r&&("xmlns"===n.prefix&&(o=n.name),e.setAttributeNS(i,o,r))):e.getAttribute(o)!==r&&e.setAttribute(o,r);for(var l=e.attributes,c=l.length-1;c>=0;c--)o=(n=l[c]).name,(i=n.namespaceURI)?(o=n.localName||o,t.hasAttributeNS(i,o)||e.removeAttributeNS(i,o)):t.hasAttribute(o)||e.removeAttribute(o)}},function(e,t,n){if(n||(n={}),"string"==typeof t)if("#document"===e.nodeName||"HTML"===e.nodeName||"BODY"===e.nodeName){var l=t;(t=i.createElement("html")).innerHTML=l}else b=(b=t).trim(),t=r?function(e){var t=i.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(b):a?function(e){return o||(o=i.createRange()).selectNode(i.body),o.createContextualFragment(e).childNodes[0]}(b):function(e){var t=i.createElement("body");return t.innerHTML=e,t.childNodes[0]}(b);else 11===t.nodeType&&(t=t.firstElementChild);var b,h=n.getNodeKey||p,y=n.onBeforeNodeAdded||v,g=n.onNodeAdded||v,A=n.onBeforeElUpdated||v,w=n.onElUpdated||v,k=n.onBeforeNodeDiscarded||v,E=n.onNodeDiscarded||v,x=n.onBeforeElChildrenUpdated||v,T=n.skipFromChildren||v,S=n.addChild||function(e,t){return e.appendChild(t)},N=!0===n.childrenOnly,L=Object.create(null),C=[];function O(e){C.push(e)}function M(e,t){if(e.nodeType===d)for(var n=e.firstChild;n;){var o=void 0;t&&(o=h(n))?O(o):(E(n),n.firstChild&&M(n,t)),n=n.nextSibling}}function H(e,t,n){!1!==k(e)&&(t&&t.removeChild(e),E(e),M(e,n))}function _(e){g(e);for(var t=e.firstChild;t;){var n=t.nextSibling,o=h(t);if(o){var i=L[o];i&&u(t,i)?(t.parentNode.replaceChild(i,t),I(i,t)):_(t)}else _(t);t=n}}function I(e,t,n){var o=h(t);if(o&&delete L[o],!n){if(!1===A(e,t))return;if(c(e,t),w(e),!1===x(e,t))return}"TEXTAREA"!==e.nodeName?function(e,t){var n,o,r,a,l,c=T(e),v=t.firstChild,p=e.firstChild;e:for(;v;){for(a=v.nextSibling,n=h(v);!c&&p;){if(r=p.nextSibling,v.isSameNode&&v.isSameNode(p)){v=a,p=r;continue e}o=h(p);var b=p.nodeType,g=void 0;if(b===v.nodeType&&(b===d?(n?n!==o&&((l=L[n])?r===l?g=!1:(e.insertBefore(l,p),o?O(o):H(p,e,!0),p=l):g=!1):o&&(g=!1),(g=!1!==g&&u(p,v))&&I(p,v)):b!==f&&b!=m||(g=!0,p.nodeValue!==v.nodeValue&&(p.nodeValue=v.nodeValue))),g){v=a,p=r;continue e}o?O(o):H(p,e,!0),p=r}if(n&&(l=L[n])&&u(l,v))c||S(e,l),I(l,v);else{var A=y(v);!1!==A&&(A&&(v=A),v.actualize&&(v=v.actualize(e.ownerDocument||i)),S(e,v),_(v))}v=a,p=r}!function(e,t,n){for(;t;){var o=t.nextSibling;(n=h(t))?O(n):H(t,e,!0),t=o}}(e,p,o);var w=s[e.nodeName];w&&w(e,t)}(e,t):s.TEXTAREA(e,t)}!function e(t){if(t.nodeType===d||11===t.nodeType)for(var n=t.firstChild;n;){var o=h(n);o&&(L[o]=n),e(n),n=n.nextSibling}}(e);var U,j,P=e,V=P.nodeType,R=t.nodeType;if(!N)if(V===d)R===d?u(e,t)||(E(e),P=function(e,t){for(var n=e.firstChild;n;){var o=n.nextSibling;t.appendChild(n),n=o}return t}(e,(U=t.nodeName,(j=t.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==j?i.createElementNS(j,U):i.createElement(U)))):P=t;else if(V===f||V===m){if(R===V)return P.nodeValue!==t.nodeValue&&(P.nodeValue=t.nodeValue),P;P=t}if(P===t)E(e);else{if(t.isSameNode&&t.isSameNode(P))return;if(I(P,t,N),C)for(var K=0,D=C.length;K<D;K++){var q=L[C[K]];q&&H(q,q.parentNode,!1)}}return!N&&P!==e&&e.parentNode&&(P.actualize&&(P=P.actualize(e.ownerDocument||i)),e.parentNode.replaceChild(P,e)),P})}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=o(579),window.liveView=new e.LiveView})();