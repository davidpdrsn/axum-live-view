(()=>{"use strict";var e,t={579:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiveView=void 0;const i=o(n(34));function r(e){if(null===document.getElementById("live-view-container"))return;var t;t=-1===location.protocol.indexOf("https")?"ws":"wss";const n=new WebSocket(`${t}://${window.location.host}${window.location.pathname}`);var o={};n.addEventListener("open",(()=>{!function(e,t){setInterval((()=>{t.debug&&console.time(a),l(e,{t:"h"})}),3e4)}(n,e)})),n.addEventListener("message",(t=>{!function(e,t,n,o){const i=JSON.parse(t.data);if("i"===i.t)n.viewState=i.d,b(e,n,o),function(e,t){const n=Object.values(u).map((e=>`[${e}]`)).join(", ");document.querySelectorAll(n).forEach((n=>{d(e,n,t)}))}(e,o);else if("r"===i.t){if(!n.viewState)return;if(!i.d)return;h(n.viewState,i.d),b(e,n,o)}else if("j"===i.t)for(const e of i.d)y(e);else"h"===i.t&&o.debug&&console.timeEnd(a)}(n,t,o,e)})),n.addEventListener("close",(()=>{!function(e){setTimeout((()=>{r(e)}),1e3)}(e)}))}t.LiveView=class{constructor(){this.options={debug:!1},r(this.options)}enableDebug(){this.options.debug=!0}disableDebug(){this.options.debug=!1}};const a="ping";function l(e,t,n){e.send(JSON.stringify(t))}const u={click:"axm-click",input:"axm-input",change:"axm-change",submit:"axm-submit",focus:"axm-focus",blur:"axm-blur",keydown:"axm-keydown",keyup:"axm-keyup",mouseenter:"axm-mouseenter",mouseover:"axm-mouseover",mouseleave:"axm-mouseleave",mouseout:"axm-mouseout",mousemove:"axm-mousemove"},s={progress:"axm-file-progress",loadStart:"axm-file-loadstart",loadEnd:"axm-file-loadend",abort:"axm-file-abort",load:"axm-file-load"},c={keydown:"axm-window-keydown",keyup:"axm-window-keyup",focus:"axm-window-focus",blur:"axm-window-blur",scroll:"axm-scroll"};function d(e,t,n){t.hasAttribute(u.click)&&f(e,0,t,t,"click",u.click,(e=>({t:"click",m:e}))),(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)&&(t.hasAttribute(u.input)&&f(e,0,t,t,"input",u.input,(e=>({t:"input",m:e,d:{v:v(t)}}))),t.hasAttribute(u.change)&&f(e,0,t,t,"change",u.change,(e=>({t:"input",m:e,d:{v:v(t)}}))),t.hasAttribute(u.focus)&&f(e,0,t,t,"focus",u.focus,(e=>({t:"input",m:e,d:{v:v(t)}}))),t.hasAttribute(u.blur)&&f(e,0,t,t,"blur",u.blur,(e=>({t:"input",m:e,d:{v:v(t)}})))),t instanceof HTMLFormElement&&(t.hasAttribute(u.change)&&f(e,0,t,t,"change",u.change,(e=>{const n=new FormData(t);return{t:"form",m:e,d:{q:new URLSearchParams(n).toString()}}})),t.hasAttribute(u.submit)&&f(e,0,t,t,"submit",u.submit,(e=>{const n=new FormData(t);return{t:"form",m:e,d:{q:new URLSearchParams(n).toString()}}}))),[["mouseenter",u.mouseenter],["mouseover",u.mouseover],["mouseleave",u.mouseleave],["mouseout",u.mouseout],["mousemove",u.mousemove]].forEach((([n,o])=>{n&&o&&t.hasAttribute(o)&&f(e,0,t,t,n,o,((e,t)=>{if(t instanceof MouseEvent)return{t:"mouse",m:e,d:{cx:t.clientX,cy:t.clientY,px:t.pageX,py:t.pageY,ox:t.offsetX,oy:t.offsetY,mx:t.movementX,my:t.movementY,sx:t.screenX,sy:t.screenY}}}))})),t instanceof HTMLInputElement&&t.hasAttribute(u.input)&&"file"===t.getAttribute("type")&&(function(e){function t(t,n,o,i){const r=new CustomEvent(t,{detail:{lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total,fileLastModified:o.lastModified,fileName:o.name,fileSize:o.size,fileType:o.type,fileWebkitRelativePath:o.webkitRelativePath,result:i.result?i.result:null,readyState:i.readyState,error:i.error}});e.dispatchEvent(r)}e&&"file"===e.getAttribute("type")&&e.addEventListener("change",(n=>{Array.from(e.files).forEach((n=>{let o=new FileReader;e.hasAttribute(s.progress)&&(o.onprogress=e=>{t(s.progress,e,n,o)}),e.hasAttribute(s.load)&&(o.onload=e=>{t(s.load,e,n,o)}),e.hasAttribute(s.loadStart)&&(o.onloadstart=e=>{t(s.loadStart,e,n,o)}),e.hasAttribute(s.loadEnd)&&(o.onloadend=e=>{t(s.loadEnd,e,n,o)}),e.hasAttribute(s.abort)&&(o.onabort=e=>{t(s.abort,e,n,o)}),o.readAsText(n)}))}))}(t),Object.values(s).forEach((n=>{f(e,0,t,t,n,n,((e,t)=>{if(t instanceof CustomEvent){let n=t.detail;return{t:"file",m:e,d:{lc:n.lengthComputable,t:n.total,l:n.loaded,flm:n.fileLastModified,fs:n.fileSize,ft:n.fileType,fn:n.fileName,fwrp:n.fileWebkitRelativePath,r:n.result,rs:n.readyState,e:n.error}}}}))}))),[["keydown",u.keydown],["keyup",u.keyup]].forEach((([n,o])=>{n&&o&&t.hasAttribute(o)&&f(e,0,t,t,n,o,((e,n)=>{var o;if(n instanceof KeyboardEvent){if(t.hasAttribute("axm-key")&&(null===(o=null==t?void 0:t.getAttribute("axm-key"))||void 0===o?void 0:o.toLowerCase())!==n.key.toLowerCase())return;return{t:"key",m:e,d:{k:n.key,kc:n.code,a:n.altKey,c:n.ctrlKey,s:n.shiftKey,me:n.metaKey}}}}))}))}function f(e,t,n,o,i,r,a){var u=function(e,t){var n;return(n=p(e,"axm-debounce"))?function(e,t){var n;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...o)}),t)}}(t,n):(n=p(e,"axm-throttle"))?function(e,t){var n;return(...o)=>{n||(e(...o),n=setTimeout((()=>{n=null}),t))}}(t,n):t}(n,(t=>{t instanceof KeyboardEvent||t.preventDefault();const o=function(e,t){const n=e.getAttribute(t);if(n)try{return JSON.parse(n)}catch(e){return n}}(n,r);if(!o)return;const i=a(o,t);i&&l(e,i)}));document===o&&m.push({event:i,callback:u}),o.addEventListener(i,u)}var m=[];function v(e){if(e instanceof HTMLTextAreaElement)return e.value;if(e instanceof HTMLInputElement)return"radio"===e.getAttribute("type")||"checkbox"===e.getAttribute("type")?e.checked:e.value;if(e instanceof HTMLSelectElement)return e.hasAttribute("multiple")?Array.from(e.selectedOptions).map((e=>e.value)):e.value;throw"Input has no input value"}function p(e,t){const n=e.getAttribute(t);if(n){const e=parseInt(n,10);if(e)return e}return null}function b(e,t,n){if(!t.viewState)return;const o=function e(t){var n="";return t.f.forEach(((o,i)=>{if(n=n.concat(o),void 0===t.d)return;const r=t.d[i];if(null!=r)if("string"==typeof r)n=n.concat(r);else if("b"in r){const t=r.f;Object.values(r.b).forEach((o=>{const i={f:t,d:o};n=n.concat(e(i))}))}else n=n.concat(e(r))})),n}(t.viewState),r=document.querySelector("#live-view-container");r&&function(e,t,n){for(var o=0;o<m.length;o++){let e=m[o];e&&(document.removeEventListener(e.event,e.callback),m.splice(o,1))}(0,i.default)(t,n,{onNodeAdded:t=>(t instanceof Element&&d(e,t),t),onBeforeElUpdated:(e,t)=>{var n;return e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&("radio"===t.getAttribute("type")||"checkbox"===t.getAttribute("type")?t.checked=e.checked:t.value=e.value),e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement&&(t.value=e.value),e instanceof HTMLOptionElement&&t instanceof HTMLOptionElement&&(null===(n=t.closest("select"))||void 0===n?void 0:n.hasAttribute("multiple"))&&(t.selected=e.selected),e instanceof HTMLSelectElement&&t instanceof HTMLSelectElement&&!t.hasAttribute("multiple")&&(t.value=e.value),!0}});const r=Object.values(c).map((e=>`[${e}]`)).join(", ");document.querySelectorAll(r).forEach((t=>{!function(e,t,n){[["keydown",c.keydown],["keyup",c.keyup]].forEach((([n,o])=>{n&&o&&t.hasAttribute(o)&&f(e,0,t,document,n,o,((e,n)=>{var o;if(n instanceof KeyboardEvent){if(t.hasAttribute("axm-key")&&(null===(o=null==t?void 0:t.getAttribute("axm-key"))||void 0===o?void 0:o.toLowerCase())!==n.key.toLowerCase())return;return{t:"key",m:e,d:{k:n.key,kc:n.code,a:n.altKey,c:n.ctrlKey,s:n.shiftKey,me:n.metaKey}}}}))})),t.hasAttribute(c.focus)&&f(e,0,t,document,"focus",c.focus,(e=>({t:"window_focus",m:e}))),t.hasAttribute(c.blur)&&f(e,0,t,document,"blur",c.blur,(e=>({t:"window_blur",m:e}))),t.hasAttribute(c.scroll)&&f(e,0,t,document,"scroll",c.scroll,(e=>({t:"scroll",m:e,d:{sx:window.scrollX,sy:window.scrollY}})))}(e,t)}))}(e,r,o)}function h(e,t){function n(e,t){for(const[n,i]of Object.entries(t))if("string"==typeof i)e[n]=i;else if(null===i)delete e[n];else if("object"==typeof i){const t=e[n];if(void 0===t)continue;"d"in i?"string"==typeof t?e[n]=i:"d"in t?h(t,i):"b"in t?console.error("not implemented: b in current"):e[n]=i:"b"in i?"string"==typeof t?e[n]=i:"b"in t?o(t,i):e[n]={f:t.f,b:i.b}:"f"in i?"string"==typeof t?e[n]=i:"d"in t?h(t,i):"b"in t?console.error("not implemented: b in current, with f"):e[n]=i:console.error("unexpected diff value",i)}}function o(e,t){if(t.f&&(e.f=t.f),t.b)for(const[o,i]of Object.entries(t.b))if(null===i)delete e.b[o];else{const t=e.b[o];void 0===t||"string"==typeof t?e.b[o]=i:n(t,i)}}t.f&&(e.f=t.f),t.d&&null!==t.d&&n(e.d||{},t.d)}function y(e){const t=()=>{if("navigate_to"===e.kind.t){const t=e.kind.uri;t.startsWith("http")?window.location.href=t:window.location.pathname=t}else if("add_class"===e.kind.t){const{selector:t,klass:n}=e.kind;document.querySelectorAll(t).forEach((e=>{e.classList.add(n)}))}else if("remove_class"===e.kind.t){const{selector:t,klass:n}=e.kind;document.querySelectorAll(t).forEach((e=>{e.classList.remove(n)}))}else if("toggle_class"===e.kind.t){const{selector:t,klass:n}=e.kind;document.querySelectorAll(t).forEach((e=>{e.classList.toggle(n)}))}else if("clear_value"===e.kind.t){const{selector:t}=e.kind;document.querySelectorAll(t).forEach((e=>{(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&(e.value="")}))}else"set_title"===e.kind.t?document.title=e.kind.title:"history_push_state"===e.kind.t?window.history.pushState({},"",e.kind.uri):e.kind};e.delay_ms?setTimeout(t,e.delay_ms):t()}},34:(e,t,n)=>{var o;n.r(t),n.d(t,{default:()=>f});var i="undefined"==typeof document?void 0:document,r=!!i&&"content"in i.createElement("template"),a=!!i&&i.createRange&&"createContextualFragment"in i.createRange();function l(e,t){var n,o,i=e.nodeName,r=t.nodeName;return i===r||(n=i.charCodeAt(0),o=r.charCodeAt(0),n<=90&&o>=97?i===r.toUpperCase():o<=90&&n>=97&&r===i.toUpperCase())}function u(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var s={OPTION:function(e,t){var n=e.parentNode;if(n){var o=n.nodeName.toUpperCase();"OPTGROUP"===o&&(o=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==o||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}u(e,t,"selected")},INPUT:function(e,t){u(e,t,"checked"),u(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var o=e.firstChild;if(o){var i=o.nodeValue;if(i==n||!n&&i==e.placeholder)return;o.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,o,i=-1,r=0,a=e.firstChild;a;)if("OPTGROUP"===(o=a.nodeName&&a.nodeName.toUpperCase()))a=(n=a).firstChild;else{if("OPTION"===o){if(a.hasAttribute("selected")){i=r;break}r++}!(a=a.nextSibling)&&n&&(a=n.nextSibling,n=null)}e.selectedIndex=i}}};function c(){}function d(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}const f=function(e,t,n){if(n||(n={}),"string"==typeof t)if("#document"===e.nodeName||"HTML"===e.nodeName||"BODY"===e.nodeName){var u=t;(t=i.createElement("html")).innerHTML=u}else f=(f=t).trim(),t=r?function(e){var t=i.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(f):a?function(e){return o||(o=i.createRange()).selectNode(i.body),o.createContextualFragment(e).childNodes[0]}(f):function(e){var t=i.createElement("body");return t.innerHTML=e,t.childNodes[0]}(f);var f,m=n.getNodeKey||d,v=n.onBeforeNodeAdded||c,p=n.onNodeAdded||c,b=n.onBeforeElUpdated||c,h=n.onElUpdated||c,y=n.onBeforeNodeDiscarded||c,g=n.onNodeDiscarded||c,A=n.onBeforeElChildrenUpdated||c,w=!0===n.childrenOnly,E=Object.create(null),k=[];function x(e){k.push(e)}function T(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var o=void 0;t&&(o=m(n))?x(o):(g(n),n.firstChild&&T(n,t)),n=n.nextSibling}}function S(e,t,n){!1!==y(e)&&(t&&t.removeChild(e),g(e),T(e,n))}function N(e){p(e);for(var t=e.firstChild;t;){var n=t.nextSibling,o=m(t);if(o){var i=E[o];i&&l(t,i)?(t.parentNode.replaceChild(i,t),L(i,t)):N(t)}else N(t);t=n}}function L(e,t,n){var o=m(t);if(o&&delete E[o],!n){if(!1===b(e,t))return;if(function(e,t){var n,o,i,r,a=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var l=a.length-1;l>=0;l--)o=(n=a[l]).name,i=n.namespaceURI,r=n.value,i?(o=n.localName||o,e.getAttributeNS(i,o)!==r&&("xmlns"===n.prefix&&(o=n.name),e.setAttributeNS(i,o,r))):e.getAttribute(o)!==r&&e.setAttribute(o,r);for(var u=e.attributes,s=u.length-1;s>=0;s--)o=(n=u[s]).name,(i=n.namespaceURI)?(o=n.localName||o,t.hasAttributeNS(i,o)||e.removeAttributeNS(i,o)):t.hasAttribute(o)||e.removeAttribute(o)}}(e,t),h(e),!1===A(e,t))return}"TEXTAREA"!==e.nodeName?function(e,t){var n,o,r,a,u,c=t.firstChild,d=e.firstChild;e:for(;c;){for(a=c.nextSibling,n=m(c);d;){if(r=d.nextSibling,c.isSameNode&&c.isSameNode(d)){c=a,d=r;continue e}o=m(d);var f=d.nodeType,p=void 0;if(f===c.nodeType&&(1===f?(n?n!==o&&((u=E[n])?r===u?p=!1:(e.insertBefore(u,d),o?x(o):S(d,e,!0),d=u):p=!1):o&&(p=!1),(p=!1!==p&&l(d,c))&&L(d,c)):3!==f&&8!=f||(p=!0,d.nodeValue!==c.nodeValue&&(d.nodeValue=c.nodeValue))),p){c=a,d=r;continue e}o?x(o):S(d,e,!0),d=r}if(n&&(u=E[n])&&l(u,c))e.appendChild(u),L(u,c);else{var b=v(c);!1!==b&&(b&&(c=b),c.actualize&&(c=c.actualize(e.ownerDocument||i)),e.appendChild(c),N(c))}c=a,d=r}!function(e,t,n){for(;t;){var o=t.nextSibling;(n=m(t))?x(n):S(t,e,!0),t=o}}(e,d,o);var h=s[e.nodeName];h&&h(e,t)}(e,t):s.TEXTAREA(e,t)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var o=m(n);o&&(E[o]=n),e(n),n=n.nextSibling}}(e);var C,M,O=e,H=O.nodeType,_=t.nodeType;if(!w)if(1===H)1===_?l(e,t)||(g(e),O=function(e,t){for(var n=e.firstChild;n;){var o=n.nextSibling;t.appendChild(n),n=o}return t}(e,(C=t.nodeName,(M=t.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==M?i.createElementNS(M,C):i.createElement(C)))):O=t;else if(3===H||8===H){if(_===H)return O.nodeValue!==t.nodeValue&&(O.nodeValue=t.nodeValue),O;O=t}if(O===t)g(e);else{if(t.isSameNode&&t.isSameNode(O))return;if(L(O,t,w),k)for(var I=0,P=k.length;I<P;I++){var R=E[k[I]];R&&S(R,R.parentNode,!1)}}return!w&&O!==e&&e.parentNode&&(O.actualize&&(O=O.actualize(e.ownerDocument||i)),e.parentNode.replaceChild(O,e)),O}}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=o(579),window.liveView=new e.LiveView})();